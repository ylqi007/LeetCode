[2768. Number of Black Blocks](https://leetcode.com/problems/number-of-black-blocks/)


## Method 1.
```java
class Solution {

    public long[] countBlackBlocks(int m, int n, int[][] coordinates) {
        Set<String> blackCells = new HashSet<>();
        for(int[] coor: coordinates) {
            blackCells.add("" + coor[0] + "#" + coor[1]);
        }

        long[] res = new long[5];
        Set<String> recCount = new HashSet<>();
        for(int[] coor: coordinates) {
            int x = coor[0];
            int y = coor[1];
            for(int i=Math.max(x-1, 0); i<=x && i < m-1; i++) {
                for(int j=Math.max(y-1, 0); j<=y && j < n-1; j++) {
                    // 这个左上角已经考虑过了
                    if(recCount.contains("" + i + "#" + j)) {
                        continue;
                    }
                    recCount.add("" + i + "#" + j);
                    int block = 0;
                    if(blackCells.contains("" + i + "#" + j)) {
                        block++;
                    }
                    if(blackCells.contains("" + (i + 1) + "#" + j)) {
                        block++;
                    }
                    if(blackCells.contains("" + i + "#" + (j + 1))) {
                        block++;
                    }
                    if(blackCells.contains("" + (i + 1) + "#" + (j + 1))) {
                        block++;
                    }
                    
                    res[block]++;
                }
            }
        }
        res[0] = (long)(m - 1) * (long)(n - 1) - recCount.size();
        return res;
    }
}
```
复杂度分析
* 时间复杂度：O(k)，其中 k 为 coordinates 的长度。
* 空间复杂度：O(k)。


## Method 2. From submissions (81ms, beats 96%)
```java
class Solution {
    public long[] countBlackBlocks(int m, int n, int[][] coordinates) {
        long[] res = new long[5];
        res[0] = (long)(m - 1) * (n - 1);

        Set<Integer> blocks = new HashSet<>();

        for(int[] coor: coordinates) {
            int x = coor[0];
            int y = coor[1];
            blocks.add(x * n + y);

            if(x > 0 && y > 0) {    // 考虑 左，左上，上
                int sum = 1;
                if(blocks.contains((x - 1) * n + y)) {
                    sum++;
                }
                if(blocks.contains((x - 1) * n + (y - 1))) {
                    sum++;
                }
                if(blocks.contains(x * n + (y - 1))) {
                    sum++;
                }
                res[sum - 1]--;
                res[sum]++;
            }

            if(x > 0 && y < n - 1) {  // 左，左下，下  
                int sum = 1;
                if(blocks.contains((x - 1) * n + y)) {
                    sum++;
                }
                if(blocks.contains((x - 1) * n + (y + 1))) {
                    sum++;
                }
                if(blocks.contains(x * n + (y + 1))) {
                    sum++;
                }
                res[sum - 1]--;
                res[sum]++;
            }

            if(x < m - 1 && y > 0) {    // 上，右上，右
                int sum = 1;
                if(blocks.contains((x + 1) * n + y)) {
                    sum++;
                }
                if(blocks.contains((x + 1) * n + (y - 1))) {
                    sum++;
                }
                if(blocks.contains(x * n + (y - 1))) {
                    sum++;
                }
                res[sum - 1]--;
                res[sum]++;
            }

            if(x < m - 1 && y < n - 1) {    // 下，右下，右
                int sum = 1;
                if(blocks.contains(x * n + y + 1)) {
                    sum++;
                }
                if(blocks.contains((x + 1) * n + y)) {
                    sum++;
                }
                if(blocks.contains((x + 1) * n + (y + 1))) {
                    sum++;
                }
                res[sum - 1]--;
                res[sum]++;
            }
        }
        return res;
    }
}
```


## Reference
* 灵茶山艾府: [枚举](https://leetcode.cn/problems/number-of-black-blocks/solutions/2336508/mei-ju-by-endlesscheng-0mnx/)